#!/bin/sh

# ****************************************************************
# DEFAULTS

addr="127.0.0.1"
port="8001"

args=""

# ****************************************************************
# OPTIONS

while getopts ":a:p:" opt; do
   case $opt in
      a) addr="$OPTARG" ;;
      p) port="$OPTARG" ;;

      # Option error handling
      ?) shift "$(($#-1))" # читаем все аргументы, начиная с неверного
         args="$@" ;;
   esac
done

# если никаких опций не было послано, то читаем всё
if [ $OPTIND -eq 1 ]
then
    args="$@"
else
    args="-- --hostname=$addr -p $port"
fi
[ -z "$args" ] && args="-- --hostname=$addr -p $port"

# ****************************************************************
# EXECUTION

npm-exec run dev $args